
name: autolamella_demo
application_file: autolamella # Thermo only

options:
  supervise:
    trench: true
    undercut: true
    notch: true
    microexpansion: true
    features: true
    lamella: true
    setup_lamella: true

fiducial:
  height: 10.e-6
  width: 1.e-6
  depth: 1.0e-6
  rotation: 0.7853
  milling_current: 28.e-9
  preset: "30 keV; 20 nA" # TESCAN only
  application_file: autolamella


trench:
  lamella_width: 22.e-6
  lamella_height: 30.0e-6
  milling_current: 7.6e-9
  trench_height: 32.e-6
  depth: 1.5e-6
  offset: 0.0e-6
  size_ratio: 0.5
  preset: "30 keV; 2.5 nA" # TESCAN only
  hfw: 180.0e-6
  application_file: autolamella

lamella:
  beam_shift_attempts: 3.0
  alignment_current: "Imaging"
  lamella_width: 10.e-6
  lamella_height: 800.e-9
  stages:
  - trench_height: 10.e-6
    lamella_width: 10.e-6
    lamella_height: 800.e-9
    depth: 1.e-6
    offset: 2.e-6
    size_ratio: 1.0
    milling_current: 2.e-9
    preset: "30 keV; 2.5 nA" # TESCAN only
    hfw: 80.0e-6
    application_file: autolamella
  - trench_height: 2.e-6
    lamella_width: 10.e-6
    lamella_height: 800.e-9
    depth: 1.e-6
    offset: 0.5e-6
    size_ratio: 1.0
    milling_current: 0.74e-9
    preset: "30 keV; 1 nA" # TESCAN only
    hfw: 80.0e-6
    application_file: autolamella
  - trench_height: 0.5e-6
    lamella_width: 10.e-6
    lamella_height: 800.e-9
    depth: 0.4e-6
    offset: 0.0e-6
    size_ratio: 1.0
    milling_current: 60.0e-12 
    preset: "30 keV; 50 pA" # TESCAN only
    hfw: 80.0e-6
    application_file: autolamella


microexpansion:
  width: 0.5e-6
  height: 18.e-6
  depth: 1.0e-6
  distance: 10.e-6 # Does not include Lamella width. So centre of microexpansion is lamella_width/2 + distance.
  milling_current: 2.e-9
  preset: "30 keV; 2.5 nA" # TESCAN only
  hfw: 200e-6
  application_file: autolamella


notch:
  enabled: false
  vheight: 2.0e-6
  vwidth: 0.2e-6
  hwidth: .0e-6
  hheight: 1.0e-6
  depth: 5.0e-6
  distance: 5.0e-6
  flip: 0
  milling_current: 2.e-9
  preset: "30 keV; 2.5 nA" # TESCAN only
  hfw: 80e-6
  application_file: autolamella


autolamella_undercut:
  width: 10.e-6
  height: 10.e-6
  depth: 1.0e-6
  milling_current: 2.e-9
  preset: "30 keV; 2.5 nA" # TESCAN only
  hfw: 80.0e-6
  application_file: autolamella
  tilt_angle: 17.0
  tilt_angle_step: 10

ml:
    encoder: resnet34
    num_classes: 3
    weights: model4.pt